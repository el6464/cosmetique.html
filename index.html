<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Belli et Bien Être</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
/* --- Reset et style global --- */
* { box-sizing: border-box; margin:0; padding:0; }
body { font-family: 'Segoe UI', Tahoma, sans-serif; background:#f0f2f5; color:#333; }
header { background:#4CAF50; color:white; display:flex; align-items:center; justify-content:space-between; padding:10px 20px; flex-wrap:wrap; }
header img { height:50px; }
header h1 { margin-left:10px; font-size:24px; flex:1; }
nav span { cursor:pointer; margin-left:20px; font-weight:bold; }
.container { display:flex; flex-wrap:wrap; justify-content:center; padding:20px; gap:20px; }

/* --- Produit --- */
.produit { background:white; border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.1); padding:15px; width:200px; text-align:center; transition: transform 0.2s; }
.produit:hover { transform: translateY(-5px); }
.produit h4 { margin-bottom:10px; }
.produit p { font-weight:bold; margin-bottom:10px; }
button { padding:5px 10px; margin:3px; border:none; border-radius:5px; background:#4CAF50; color:white; cursor:pointer; transition:0.2s; }
button:hover { background:#45a049; }

/* --- Panier --- */
#panier { position:fixed; top:70px; right:10px; width:320px; max-height:80vh; overflow:auto; background:white; border-radius:8px; box-shadow:0 2px 10px rgba(0,0,0,0.2); padding:15px; display:none; z-index:100; }
#panier h3 { margin-top:0; text-align:center; }
.panier-item { display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; }

/* --- Formulaire client --- */
#formClient { margin-top:20px; background:white; padding:20px; border-radius:8px; max-width:500px; margin-left:auto; margin-right:auto; display:none; box-shadow:0 2px 10px rgba(0,0,0,0.1);}
#formClient label { display:block; margin:10px 0; }
#formClient input[type=text] { width:100%; padding:8px; border-radius:5px; border:1px solid #ccc; }

/* --- Facture --- */
#facture { display:none; padding:20px; background:white; border-radius:8px; max-width:700px; margin:20px auto; box-shadow:0 2px 10px rgba(0,0,0,0.1);}
#facture img { height:60px; display:block; margin-bottom:10px; }
#facture table { width:100%; border-collapse:collapse; margin-top:10px; }
#facture th, #facture td { border:1px solid #ccc; padding:8px; text-align:left; }
#facture th { background:#f2f2f2; }

/* --- Admin --- */
#pageAdmin { display:none; padding:20px; max-width:1000px; margin:0 auto; }
.admin-table { width:100%; border-collapse:collapse; }
.admin-table th, .admin-table td { border:1px solid #ccc; padding:8px; text-align:left; }
.admin-table th { background:#f2f2f2; }

/* --- Responsive --- */
@media(max-width:600px){
    .container { flex-direction:column; align-items:center; }
    #panier { width:90%; right:5%; }
    #formClient, #facture { width:90%; }
}
</style>
</head>
<body>

<header>
    <div style="display:flex; align-items:center;">
        <img src="logo.png" alt="Logo">
        <h1>Belli et Bien Être</h1>
    </div>
    <nav>
        <span id="ouvrirPanier">Panier (<span id="compteurPanier">0</span>)</span>
        <span id="allerAdmin">Admin</span>
    </nav>
</header>

<div class="container" id="produitsContainer"></div>

<!-- Panier -->
<div id="panier">
    <h3>Panier</h3>
    <div id="listePanier"></div>
    <button id="validerCommandeBtn">Valider la commande</button>
</div>

<!-- Formulaire client -->
<div id="formClient">
    <h3>Informations du client</h3>
    <label>Nom: <input type="text" id="nomClient"></label>
    <label>Prénom: <input type="text" id="prenomClient"></label>
    <label>Adresse: <input type="text" id="adresseClient"></label>
    <label>Téléphone: <input type="text" id="telClient"></label>
    <label>Date de commande: <input type="text" id="dateCommande" readonly></label>
    <label>Date de livraison: <input type="text" id="dateLivraison" readonly></label>
    <h4>Mode de paiement</h4>
    <label><input type="radio" name="paiement" value="Wave"> Wave</label>
    <label><input type="radio" name="paiement" value="Orange Money"> Orange Money</label>
    <label><input type="radio" name="paiement" value="Espèces"> Espèces</label>
    <button id="confirmerCommande">Confirmer la commande</button>
</div>

<!-- Facture -->
<div id="facture">
    <img src="logo.png" alt="Logo">
    <h2>Belli et Bien Être</h2>
    <p>Adresse: 123 Rue Exemple, Ville</p>
    <p>Téléphone: 0123456789</p>
    <h3>Facture n° <span id="numFacture"></span></h3>
    <p>Client: <span id="clientInfo"></span></p>
    <p>Mode de paiement: <span id="modePaiementFacture"></span></p>
    <table id="tableFacture">
        <thead>
            <tr>
                <th>Produit</th>
                <th>Qté</th>
                <th>Prix</th>
                <th>Total</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
    <h3>Total: <span id="totalFacture"></span> €</h3>
</div>

<!-- Page admin -->
<div id="pageAdmin">
    <h2>Administration - Commandes</h2>
    <table class="admin-table">
        <thead>
            <tr>
                <th>Facture</th>
                <th>Client</th>
                <th>Téléphone</th>
                <th>Adresse</th>
                <th>Date commande</th>
                <th>Date livraison</th>
                <th>Mode paiement</th>
                <th>Produits</th>
                <th>Total</th>
            </tr>
        </thead>
        <tbody id="adminBody"></tbody>
    </table>
</div>

<script>
// ----- PRODUITS -----
const produits = [
    { id:1, nom:"Produit A", prix:10 },
    { id:2, nom:"Produit B", prix:15 },
    { id:3, nom:"Produit C", prix:20 }
];

const panier = [];
const produitsContainer = document.getElementById("produitsContainer");
const listePanier = document.getElementById("listePanier");
const compteurPanier = document.getElementById("compteurPanier");

function afficherProduits(){
    produitsContainer.innerHTML = "";
    produits.forEach(p=>{
        const div = document.createElement("div");
        div.className = "produit";
        div.innerHTML = `<h4>${p.nom}</h4><p>${p.prix} €</p>
                         <button onclick="ajouterPanier(${p.id})">Ajouter</button>`;
        produitsContainer.appendChild(div);
    });
}

function ajouterPanier(id){
    const produit = produits.find(p=>p.id===id);
    const exist = panier.find(p=>p.id===id);
    if(exist) exist.qte++;
    else panier.push({...produit, qte:1});
    afficherPanier();
}

function afficherPanier(){
    listePanier.innerHTML="";
    let total=0;
    panier.forEach(p=>{
        const div = document.createElement("div");
        div.className = "panier-item";
        div.innerHTML = `<span>${p.nom} - ${p.prix} €</span>
            <span>
            <button onclick="modifierQte(${p.id}, -1)">-</button>
            ${p.qte}
            <button onclick="modifierQte(${p.id}, 1)">+</button>
            <button onclick="supprimerProduit(${p.id})">Supprimer</button>
            </span>`;
        listePanier.appendChild(div);
        total += p.prix * p.qte;
    });
    compteurPanier.textContent = panier.reduce((sum,p)=>sum+p.qte,0);
}

function modifierQte(id, delta){
    const p = panier.find(p=>p.id===id);
    if(!p) return;
    p.qte += delta;
    if(p.qte <= 0) supprimerProduit(id);
    afficherPanier();
}

function supprimerProduit(id){
    const index = panier.findIndex(p=>p.id===id);
    if(index!==-1) panier.splice(index,1);
    afficherPanier();
}

// ----- PANIER -----
document.getElementById("ouvrirPanier").onclick = ()=>{
    const p = document.getElementById("panier");
    p.style.display = p.style.display==="none" ? "block" : "none";
}

// ----- COMMANDE -----
document.getElementById("validerCommandeBtn").onclick = ()=>{
    if(panier.length===0){ alert("Panier vide !"); return; }
    const formClient = document.getElementById("formClient");
    formClient.style.display = "block";
    const today = new Date();
    document.getElementById("dateCommande").value = today.toLocaleDateString();
    const livraison = new Date();
    livraison.setDate(today.getDate()+3);
    document.getElementById("dateLivraison").value = livraison.toLocaleDateString();
}

// ----- CONFIRMATION -----
document.getElementById("confirmerCommande").onclick = ()=>{
    const nom = document.getElementById("nomClient").value;
    const prenom = document.getElementById("prenomClient").value;
    const adresse = document.getElementById("adresseClient").value;
    const tel = document.getElementById("telClient").value;
    const dateCmd = document.getElementById("dateCommande").value;
    const dateLiv = document.getElementById("dateLivraison").value;
    const paiementInput = document.querySelector('input[name="paiement"]:checked');
    if(!nom || !prenom || !adresse || !tel){ alert("Veuillez remplir tous les champs"); return; }
    if(!paiementInput){ alert("Veuillez choisir un mode de paiement !"); return; }
    const paiement = paiementInput.value;

    const numFact = "F"+Date.now();
    document.getElementById("numFacture").textContent = numFact;
    document.getElementById("clientInfo").textContent = `${prenom} ${nom}, ${adresse}, ${tel}`;
    document.getElementById("modePaiementFacture").textContent = paiement;

    const tbody = document.querySelector("#tableFacture tbody");
    tbody.innerHTML="";
    let total = 0;
    panier.forEach(p=>{
        const tr = document.createElement("tr");
        const ligneTotal = p.prix * p.qte;
        total += ligneTotal;
        tr.innerHTML = `<td>${p.nom}</td><td>${p.qte}</td><td>${p.prix} €</td><td>${ligneTotal} €</td>`;
        tbody.appendChild(tr);
    });
    document.getElementById("totalFacture").textContent = total;
    document.getElementById("facture").style.display="block";
    document.getElementById("formClient").style.display="none";

    const commandes = JSON.parse(localStorage.getItem("commandes")||"[]");
    commandes.push({
        facture:numFact, client:`${prenom} ${nom}`, tel, adresse, dateCommande:dateCmd,
        dateLivraison:dateLiv, paiement, produits:[...panier], total
    });
    localStorage.setItem("commandes", JSON.stringify(commandes));

    panier.length=0;
    afficherPanier();
}

// ----- ADMIN -----
document.getElementById("allerAdmin").onclick = ()=>{
    document.querySelector(".container").style.display="none";
    document.getElementById("panier").style.display="none";
    document.getElementById("formClient").style.display="none";
    document.getElementById("facture").style.display="none";
    const pageAdmin = document.getElementById("pageAdmin");
    pageAdmin.style.display="block";

    const tbodyAdmin = document.getElementById("adminBody");
    tbodyAdmin.innerHTML="";
    const commandes = JSON.parse(localStorage.getItem("commandes")||"[]");
    commandes.forEach(c=>{
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${c.facture}</td><td>${c.client}</td><td>${c.tel}</td><td>${c.adresse}</td>
                        <td>${c.dateCommande}</td><td>${c.dateLivraison}</td><td>${c.paiement}</td>
                        <td>${c.produits.map(p=>p.nom+" x"+p.qte).join(", ")}</td>
                        <td>${c.total} €</td>`;
        tbodyAdmin.appendChild(tr);
    });
}

afficherProduits();
</script>

</body>
</html>
