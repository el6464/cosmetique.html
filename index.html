<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Belli et Bien Être - Boutique</title>
<style>
body { font-family: Arial, sans-serif; margin: 0; background-color: #f2f2f2; }
header { background-color: #4CAF50; color: white; padding: 15px; display: flex; align-items: center; justify-content: space-between; }
header img { height: 50px; }
nav { display: flex; background-color: #333; }
nav button { flex: 1; padding: 10px; color: white; background-color: #333; border: none; cursor: pointer; }
nav button.active { background-color: #4CAF50; }
.tab { display: none; padding: 20px; }
.products { display: flex; flex-wrap: wrap; gap: 20px; }
.product { background-color: white; padding: 15px; border-radius: 5px; width: 200px; box-shadow: 0 0 5px #aaa; }
button { padding: 5px 10px; margin-top: 5px; cursor: pointer; }
table { width: 100%; border-collapse: collapse; margin-top: 10px; }
table, th, td { border: 1px solid #ccc; }
th, td { padding: 8px; text-align: center; }
form input, form select { width: 100%; padding: 5px; margin: 5px 0; }
</style>
</head>
<body>

<header>
    <img src="logo.png" alt="Logo Belli et Bien Être">
    <span>Panier : <span id="nbProduits">0</span> produits</span>
</header>

<nav>
    <button id="tabProduitsBtn" class="active">Produits</button>
    <button id="tabPanierBtn">Panier</button>
</nav>

<!-- Onglet Produits -->
<div id="tabProduits" class="tab" style="display:block;">
    <div class="products">
        <div class="product">
            <h4>Produit A</h4>
            <p>Prix: 10€</p>
            <button onclick="ajouterAuPanier('Produit A', 10)">Ajouter</button>
        </div>
        <div class="product">
            <h4>Produit B</h4>
            <p>Prix: 15€</p>
            <button onclick="ajouterAuPanier('Produit B', 15)">Ajouter</button>
        </div>
        <div class="product">
            <h4>Produit C</h4>
            <p>Prix: 20€</p>
            <button onclick="ajouterAuPanier('Produit C', 20)">Ajouter</button>
        </div>
    </div>
</div>

<!-- Onglet Panier -->
<div id="tabPanier" class="tab">
    <h3>Votre Panier</h3>
    <table id="tablePanier">
        <thead>
            <tr><th>Produit</th><th>Prix</th><th>Qté</th><th>Total</th><th>Action</th></tr>
        </thead>
        <tbody></tbody>
    </table>
    <p>Total : <span id="totalPanier">0</span>€</p>
    <button onclick="allerFormulaire()">Valider le panier</button>
</div>

<!-- Formulaire / Paiement -->
<div id="tabFormulaire" class="tab">
    <h3>Formulaire de commande</h3>
    <form id="commandeForm">
        <input type="text" id="nom" placeholder="Nom" required>
        <input type="text" id="prenom" placeholder="Prénom" required>
        <input type="text" id="adresse" placeholder="Adresse" required>
        <input type="tel" id="telephone" placeholder="Téléphone" required>
        <input type="text" id="dateCommande" readonly>
        <input type="text" id="dateLivraison" readonly>
        <select id="modePaiement" required>
            <option value="">-- Choisir le mode de paiement --</option>
            <option value="Wave">Wave</option>
            <option value="Orange Money">Orange Money</option>
            <option value="Espèces">Espèces</option>
        </select>
        <button type="submit">Valider et Payer</button>
    </form>
</div>

<script>
let panier = [];

// Navigation onglets
document.getElementById("tabProduitsBtn").addEventListener("click", ()=>{
    document.getElementById("tabProduits").style.display="block";
    document.getElementById("tabPanier").style.display="none";
    document.getElementById("tabFormulaire").style.display="none";
    document.getElementById("tabProduitsBtn").classList.add("active");
    document.getElementById("tabPanierBtn").classList.remove("active");
});
document.getElementById("tabPanierBtn").addEventListener("click", ()=>{
    document.getElementById("tabProduits").style.display="none";
    document.getElementById("tabPanier").style.display="block";
    document.getElementById("tabFormulaire").style.display="none";
    document.getElementById("tabProduitsBtn").classList.remove("active");
    document.getElementById("tabPanierBtn").classList.add("active");
});

function ajouterAuPanier(nom, prix){
    const index = panier.findIndex(p => p.nom === nom);
    if(index>-1) panier[index].quantite++;
    else panier.push({nom, prix, quantite:1});
    afficherPanier();
}

function afficherPanier(){
    const tbody = document.querySelector("#tablePanier tbody");
    tbody.innerHTML="";
    let total=0;
    panier.forEach((p,i)=>{
        const row=document.createElement("tr");
        row.innerHTML=`
            <td>${p.nom}</td>
            <td>${p.prix}€</td>
            <td>
                <button onclick="modifierQté(${i},-1)">-</button>
                ${p.quantite}
                <button onclick="modifierQté(${i},1)">+</button>
            </td>
            <td>${p.prix*p.quantite}€</td>
            <td><button onclick="supprimerProduit(${i})">Supprimer</button></td>
        `;
        tbody.appendChild(row);
        total += p.prix*p.quantite;
    });
    document.getElementById("totalPanier").innerText=total;
    document.getElementById("nbProduits").innerText=panier.reduce((sum,p)=>sum+p.quantite,0);
}

function modifierQté(i,delta){
    panier[i].quantite+=delta;
    if(panier[i].quantite<=0) panier.splice(i,1);
    afficherPanier();
}

function supprimerProduit(i){ panier.splice(i,1); afficherPanier(); }

function allerFormulaire(){
    if(panier.length===0){ alert("Votre panier est vide !"); return; }
    document.getElementById("tabProduits").style.display="none";
    document.getElementById("tabPanier").style.display="none";
    document.getElementById("tabFormulaire").style.display="block";
    document.getElementById("tabProduitsBtn").classList.remove("active");
    document.getElementById("tabPanierBtn").classList.remove("active");

    // Dates automatiques
    const today = new Date();
    const livraison = new Date();
    livraison.setDate(today.getDate()+3);
    document.getElementById("dateCommande").value=today.toLocaleDateString();
    document.getElementById("dateLivraison").value=livraison.toLocaleDateString();
}

// Soumission formulaire
document.getElementById("commandeForm").addEventListener("submit", function(e){
    e.preventDefault();
    if(panier.length===0){ alert("Panier vide !"); return; }
    const paiement = document.getElementById("modePaiement").value;
    if(!paiement){ alert("Choisir un mode de paiement !"); return; }

    // Redirection paiement
    if(paiement==="Wave") window.open("https://www.wave.com/pay", "_blank");
    else if(paiement==="Orange Money") window.open("https://www.orangemoney.com/pay", "_blank");
    else alert("Paiement en espèces confirmé !");

    // Sauvegarde commandes
    let commandes = JSON.parse(localStorage.getItem("commandes") || "[]");
    const numFacture = "BEB-"+Date.now();
    commandes.push({numFacture, produits:panier, nom:document.getElementById("nom").value, prenom:document.getElementById("prenom").value, adresse:document.getElementById("adresse").value, tel:document.getElementById("telephone").value, dateCommande:document.getElementById("dateCommande").value, dateLivraison:document.getElementById("dateLivraison").value, paiement});
    localStorage.setItem("commandes", JSON.stringify(commandes));

    // Vider panier
    panier=[];
    afficherPanier();
    alert("Commande enregistrée !");
    // Retour aux produits
    document.getElementById("tabProduits").style.display="block";
    document.getElementById("tabFormulaire").style.display="none";
});
</script>

</body>
</html>
